# Диаграмма работы функциональности копирования сессий и папок

## Пользовательский интерфейс

```
┌─────────────────────────────────────────────────────────────┐
│ SuperTerminal - Session Copy/Paste Flow                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐    ┌─────────────────────────────────┐ │
│  │   Sessions      │    │        Main Area                │ │
│  │   Tree          │    │                                 │ │
│  │                 │    │                                 │ │
│  │  📁 Folder 1    │    │                                 │ │
│  │  ├─ 🔗 Session1 │    │                                 │ │
│  │  ├─ 🔗 Session2 │    │                                 │ │
│  │  └─ 📁 SubFolder│    │                                 │ │
│  │      ├─ 🔗 Sess5│    │                                 │ │
│  │      └─ 🔗 Sess6│    │                                 │ │
│  │                 │    │                                 │ │
│  │  📁 Folder 2    │    │                                 │ │
│  │  └─ 🔗 Session4 │    │                                 │ │
│  │                 │    │                                 │ │
│  └─────────────────┘    └─────────────────────────────────┘ │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## Процесс копирования

```
1. Пользователь выбирает сессию или папку
   ↓
2. Нажимает Ctrl+C или ПКМ → Copy
   ↓
3. Система копирует данные элемента
   ↓
4. Элемент подсвечивается зеленым цветом
   ↓
5. Готово к вставке
```

## Процесс вставки

```
1. Пользователь выбирает место вставки
   ↓
2. Нажимает Ctrl+V или ПКМ → Paste
   ↓
3. Система создает копию элемента
   ↓
4. Для папок: рекурсивно генерирует новые ID для всех вложенных элементов
   ↓
5. Добавляет суффикс "(Copy)" к имени
   ↓
6. Вставляет в выбранное место
   ↓
7. Сохраняет изменения
```

## Кодовая структура

```
renderer.html
├── Переменные
│   ├── copiedSession (null) - хранит скопированную сессию или папку
│   └── sessionTree ([]) - дерево сессий
├── Функции копирования
│   ├── copySession(id) - копирует сессию или папку
│   ├── pasteSession(targetId) - вставляет сессию или папку
│   ├── generateNewIds(node) - рекурсивно генерирует новые ID
│   └── clearCopiedSession(id) - очищает копию
├── Обработчики клавиш
│   ├── Ctrl+C - копирование сессий и папок
│   └── Ctrl+V - вставка сессий и папок
├── Контекстное меню
│   ├── Copy - копировать сессии и папки
│   └── Paste - вставить сессии и папки
└── CSS стили
    ├── .item.copied - стиль скопированной сессии или папки
    └── .item.copied:hover - стиль при наведении
```

## Состояния элемента

```
Нормальная сессия/папка
    ↓ (Ctrl+C)
Скопированная сессия/папка (зеленый фон)
    ↓ (Ctrl+V)
Новая сессия/папка с суффиксом "(Copy)"
    ↓ (Delete)
Удаление + очистка копии
```

## Обработка ошибок

```
- Проверка типа узла (сессии и папки можно копировать)
- Проверка существования скопированного элемента
- Автоматическая очистка при удалении
- Валидация места вставки
- Рекурсивная генерация ID для вложенных элементов
```
