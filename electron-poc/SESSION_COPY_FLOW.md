# Диаграмма работы функциональности копирования сессий

## Пользовательский интерфейс

```
┌─────────────────────────────────────────────────────────────┐
│ SuperTerminal - Session Copy/Paste Flow                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐    ┌─────────────────────────────────┐ │
│  │   Sessions      │    │        Main Area                │ │
│  │   Tree          │    │                                 │ │
│  │                 │    │                                 │ │
│  │  📁 Folder 1    │    │                                 │ │
│  │  ├─ 🔗 Session1 │    │                                 │ │
│  │  ├─ 🔗 Session2 │    │                                 │ │
│  │  └─ 🔗 Session3 │    │                                 │ │
│  │                 │    │                                 │ │
│  │  📁 Folder 2    │    │                                 │ │
│  │  └─ 🔗 Session4 │    │                                 │ │
│  │                 │    │                                 │ │
│  └─────────────────┘    └─────────────────────────────────┘ │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## Процесс копирования

```
1. Пользователь выбирает сессию
   ↓
2. Нажимает Ctrl+C или ПКМ → Copy
   ↓
3. Система копирует данные сессии
   ↓
4. Сессия подсвечивается зеленым цветом
   ↓
5. Готово к вставке
```

## Процесс вставки

```
1. Пользователь выбирает место вставки
   ↓
2. Нажимает Ctrl+V или ПКМ → Paste
   ↓
3. Система создает копию сессии
   ↓
4. Добавляет суффикс "(Copy)" к имени
   ↓
5. Вставляет в выбранное место
   ↓
6. Сохраняет изменения
```

## Кодовая структура

```
renderer.html
├── Переменные
│   ├── copiedSession (null) - хранит скопированную сессию
│   └── sessionTree ([]) - дерево сессий
├── Функции копирования
│   ├── copySession(id) - копирует сессию
│   ├── pasteSession(targetId) - вставляет сессию
│   └── clearCopiedSession(id) - очищает копию
├── Обработчики клавиш
│   ├── Ctrl+C - копирование
│   └── Ctrl+V - вставка
├── Контекстное меню
│   ├── Copy - копировать
│   └── Paste - вставить
└── CSS стили
    ├── .item.copied - стиль скопированной сессии
    └── .item.copied:hover - стиль при наведении
```

## Состояния сессии

```
Нормальная сессия
    ↓ (Ctrl+C)
Скопированная сессия (зеленый фон)
    ↓ (Ctrl+V)
Новая сессия с суффиксом "(Copy)"
    ↓ (Delete)
Удаление + очистка копии
```

## Обработка ошибок

```
- Проверка типа узла (только сессии можно копировать)
- Проверка существования скопированной сессии
- Автоматическая очистка при удалении
- Валидация места вставки
```
